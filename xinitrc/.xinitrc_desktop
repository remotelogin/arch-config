#!/bin/sh
export XDG_SESSION_TYPE=x11
export XDG_CURRENT_DESKTOP=dwm
export DESKTOP_SESSION=dwm

export SAL_USE_VCLPLUGIN=gtk3
export GDK_BACKEND=x11

# Status bar loop
while true; do
    xsetroot -name "Laptop | Battery: $(echo "$(cat /sys/class/power_supply/BAT1/energy_now) / $(cat /sys/class/power_supply/BAT1/energy_full) * 100" | bc -l | awk '{print int($1+0.05)}')% | RAM: $(free -m | awk '/Mem:/ {printf "%.1fGB / %.1fGB", $3/1024, $2/1024}') | $(uptime -p) | $(date +"%a %d.%m.%y %H:%M:%S")"
    sleep 2
done &

exec dwm
